<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Городской Транспорт</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f8f8f8; margin: 0; padding: 20px; color: #000; }
    .container { max-width: 420px; margin: auto; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h1 { color: #d32f2f; text-align: center; font-size: 24px; margin: 0 0 10px; }
    p { text-align: center; color: #666; margin: 0 0 20px; }
    input { width: 100%; font-size: 32px; text-align: center; letter-spacing: 12px; padding: 12px; border: 2px solid #ddd; border-radius: 12px; margin: 20px 0; box-sizing: border-box; }
    button { width: 100%; padding: 16px; font-size: 18px; background: #d32f2f; color: white; border: none; border-radius: 12px; cursor: pointer; margin: 10px 0; }
    button.green { background: #388e3c; }
    #ticket { display: none; border-top: 6px solid #d32f2f; padding-top: 20px; }
    .info { margin: 10px 0; font-size: 16px; }
    .bold { font-weight: bold; }
    .timer { font-size: 36px; color: #d32f2f; text-align: center; font-weight: bold; margin: 20px 0; }
    #qrcode { text-align: center; font-size: 18px; margin: 20px 0; color: #333; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Городской Транспорт</h1>
    <p>mini app</p>
    <p>Введите код с наклейки</p>
    <input type="text" id="code" maxlength="6" placeholder="524858">
    <button onclick="generateFakeTicket()">Создать билет</button>

    <div id="ticket">
      <h3 style="color:#d32f2f;">Данные билета</h3>
      <div class="info"><span class="bold">Перевозчик:</span> ИП Цугленок М.М.</div>
      <div class="info"><span class="bold">Маршрут:</span> 83, Дом ученых - пр. Ульяновский</div>
      <div class="info"><span class="bold">Гос. номер:</span> х377тх124</div>
      <div class="info"><span class="bold">Тариф:</span> Полный - 48.00 ₽</div>
      <div class="info"><span class="bold">Контроль:</span> <span id="ctrlNum">1 401 070 339</span></div>
      <div class="info"><span class="bold">Дата покупки:</span> 12 февраля 2026 г.</div>
      <div class="info"><span class="bold">Время покупки:</span> 18:56</div>

      <div class="timer" id="timer">Действует: 14 сек.</div>
      <div id="qrcode">QR-код появится после нажатия кнопки</div>
      <button class="green" onclick="presentTicket()">Предъявить билет</button>
    </div>
  </div>

  <script>
    function generateFakeTicket() {
      var code = document.getElementById('code').value.trim();
      if (code.length !== 6 || !/^\d{6}$/.test(code)) {
        alert('Введи ровно 6 цифр!');
        return;
      }

      var rand = Math.floor(100000 + Math.random() * 900000).toString();
      var ctrl = '1 401 ' + rand.slice(0,3) + ' ' + rand.slice(3);
      document.getElementById('ctrlNum').textContent = ctrl;

      document.getElementById('ticket').style.display = 'block';

      var sec = 14;
      var timerEl = document.getElementById('timer');
      var interval = setInterval(function() {
        sec = sec - 1;
        timerEl.textContent = 'Действует: ' + sec + ' сек.';
        if (sec <= 0) {
          clearInterval(interval);
          timerEl.textContent = 'Билет истёк';
        }
      }, 1000);

      document.getElementById('qrcode').innerHTML = 'QR-код (фейковый): ' + code + ' / ' + ctrl;
    }

    function presentTicket() {
      alert('Показывай экран контролёру!');
    }
  </script>
</body>
</html>
